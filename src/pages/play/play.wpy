<style lang="less">
.title{}
.intr{
  font-size:24rpx; display:block; overflow:hidden;
  .inner{height:40rpx;}
}
</style>
<template>
  <view class="container">
    <videoCom :videoUrl="videoUrl"></videoCom>
    <view @tap="playTap">play</view>
    <!-- å¤åˆ¶uå¯†ä»¤ -->
    <view @tap="copyUML">æ‹·è´uå¯†ä»¤</view>

    <!-- è§†é¢‘ç®€ä»‹ -->
    <view>
      <view class="intr">
        <text @tap="tapSliceIntr" wx:if="{{showSliceIntr}}">{{sliceIntr}}</text>
        <text @tap="tapAllIntr" wx:if="{{showAllIntr}}">{{allIntr}}</text>
      </view>
      <text>3,983,442,790æ¬¡æ’­æ”¾</text>
    </view>

    <!-- çŒœä½ å–œæ¬¢ -->
    <view class="relatevideo">
      <repeat for="{{list}}" key="index" index="index" item="item">
        <relateVideo :items="item"></relateVideo>
      </repeat>
    </view>

    <!-- è¯„è®º -->
    <view class="comment"></view>
    <!-- <panel>
    </panel> -->
  </view>
</template>

<script>
  import wepy from 'wepy'
  import videoCom from '../../components/videoCom'
  import relateVideo from '../../components/relateVideo'
  import testMixin from '../../mixins/test'
  import listData from '../../config/listMock'

  const intrText = 'é«˜ç«¯ç‰™ç§‘è¯Šæ‰€çš„ç‰™åŒ»ç¨‹çš“ä¸šä½™æ—¶é—´ç»å¸¸å¸®åˆ«äººå‡ºè°‹åˆ’ç­–è¿½å¥³å­©ï¼Œè¿½å¥³å­©æœ‰æ— æ•°ç§æ–¹æ³•çš„ä»–å´è¿˜æ²¡æœ‰æ‹çˆ±è¿‡ã€‚å—è¿‡æƒ…ä¼¤ä¸“æ²»å„ç§æ¸£ç”·çš„ç½—ç¥æ¥çœ‹ç‰™ç—…ï¼Œå¶é‡ç¨‹çš“ï¼Œä¸¤äººå†¤å®¶è·¯çª„ã€‚ä¸¤ä¸ªå½¼æ­¤è®¨åŒçš„äººï¼Œå¼€å§‹äº†ä¸€æ®µå•¼ç¬‘çš†éçš„æƒ…æ„Ÿè¿½é€æˆ˜ã€‚ç¨‹çš“çš„åˆä¼™äººå¼ é“­é˜³åŠ¨äº†çœŸå¿ƒè®©ç¨‹çš“å¸®å¿™è¿½ä¸€ä¸ªå¥³å­©ï¼Œè€Œè¿™ä¸ªå¥³å­©ç«Ÿæ˜¯ç¨‹çš“æ›¾ç»çš„æš—æ‹å¯¹è±¡ã€‚ç¨‹çš“çš„æœ‹å‹é‚¹åŒ—ä¸šè®©ç¨‹çš“å‡ºä¸»æ„è¿½ä¸€ä¸ªå¥³æ¨¡ç‰¹ã€‚ä¸‰ä¸ªé‡åˆ°ä¸åŒæƒ…æ„Ÿé—®é¢˜çš„ç”·äººæˆäº†é“ä¸‰è§’ï¼Œæœ€ç»ˆä»–ä»¬éƒ½æ‰¾åˆ°äº†æœ€åˆé€‚è‡ªå·±çš„å¦ä¸€åŠï¼ŒåŒæ—¶ä¹Ÿæ”¶è·äº†æˆé•¿ã€‚'

  export default class Play extends wepy.page {
    config = {
      navigationBarTitleText: 'play'
    }

    onReady() {
      this.currentVideo = wx.createVideoContext('video')
    }

    data = {
      videoUrl: 'https://gw.alicdn.com/bao/uploaded/TB10kt0kNTI8KJjSspiXXbM4FXa.mp4?spm=a1z3i.a4.0.0.4228487fVUqkML&file=TB10kt0kNTI8KJjSspiXXbM4FXa.mp4',
      showAllIntr: false,
      showSliceIntr: true,
      allIntr: intrText,
      sliceIntr: intrText.slice(0, 50),
      list: listData
    }
    mixins = [testMixin]

    components = {
      videoCom: videoCom,
      relateVideo: relateVideo
    }

    methods = {
      playTap() {
        this.currentVideo.play()
      },

      // è®¾ç½®å¹¶æ‹·è´uå¯†ä»¤
      copyUML() {
        wx.setClipboardData({
          data: 'å¤åˆ¶è¿™æ¡ä¿¡æ¯ï¼„CgDdZy41G6pï¼„åæ‰“å¼€ğŸ‘‰ä¼˜é…·ğŸ‘ˆã€ç«‹å³é¢†å–ã€‘',
          success: function (res) {
            wx.getClipboardData({
              success: function (res) {
                wx.showToast({
                  title: 'å¤åˆ¶æˆåŠŸ',
                  duration: 2000
                });
                console.log(res.data) // data
              }
            })
          }
        })
      },

      // å±•å¼€æ”¶èµ·ç®€ä»‹
      tapSliceIntr() {
        this.showAllIntr = true
        this.showSliceIntr = false
      },
      tapAllIntr() {
        this.showAllIntr = false
        this.showSliceIntr = true
      }
    }

    onLoad(params, data) {
      console.log(params.atest)
      console.log(listData)
    }
  }
</script>
